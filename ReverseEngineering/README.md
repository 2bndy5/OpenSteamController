# Reverse Engineering

The work in this directory focuses on deconstructing the firmware and hardware
 of the Steam Controller. The understanding gained from this is the basis for
 the other work being done in this project. 


# Understanding the Hardware

See [Luna_maiboard_V000456-00_rev3.md](./Luna_maiboard_V000456-00_rev3.md) 
 for information regarding the Steam Controller hardware pertaining to 
 Luna_mainboard V000456-00 rev3.


# Understanding the Software

See [LPC11U37F_Software.md](./LPC11U37F_Software.md) for information regarding
 the software running on the LPC11U37 main/master processor.


# TODO

This section is a running list of priorities to focus on in hopes of reaching
 goal of modifying haptics jingle. This will be updated as tasks are completed
 and more knowledge is gained about the Steam Controller.

1. Simulation to C Conversion
    1. Continue running straightforward sim (with USB_VBUS = 1)
        1. Finish converting Left Haptic Init sim data
        1. Convert I2C init (for accelerometer/gyro?)
            1. Looks we will need to sim I2C interrupt to continue...
    1. Run and decode non-straightforward paths
        1. Callbacks
            1. USB_Configure_Event at 0x00004e59
            1. HID_GetReport at 0x00005af1
            1. HID_SetReport at 0x00009565
        1. Interrupts that have been enabled (Note that GPREG1 is set to 1 in init2()...)
            1. I2C interrrupt
            1. USB_IRQ 
            1. PINT0 (interrupt generated by state change of PIO0_3/USB_VBUS)
    1. Redo portions of straightforward sim already decoded, but reasses with new .c logging from pinkySim improvements
        1. Make sure we didn't miss anything (or neglected to keep some info (i.e. hw pinout info) up to date during original decode)
        1. Try to turn all push/pops into function calls
1. List more details about hardware [Luna_maiboard_V000456-00_rev3.md](./Luna_maiboard_V000456-00_rev3.md)
    1. Other processors (i.e. wireless comms chip, gyro, haptics chip)
    1. See if we can get information on each pin (focus on LPC chip)
    1. Add In/Out configuration column for pins?
    1. What is PIO1_7 connected to on hardware?
        1. Ohm it out!
    1. What is PIO0_19 connected to on hardware?
        1. Ohm it out!
1. Decompose EEPROM dumps
    1. Captured from two different controllers to isolate some differences
    1. Change settings to isolate other differences
1. How is communication occurring with radio chip?
1. Can we (continue to) make pinkySim logging better 
    1. More automation or second steps for cleaning .c log file?
